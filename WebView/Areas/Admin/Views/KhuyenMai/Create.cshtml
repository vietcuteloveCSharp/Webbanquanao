@model WebView.NghiaDTO.KhuyenMaiDTO

@{
    ViewData["Title"] = "Tạo mã giảm giá mới";
}

<h2>@ViewData["Title"]</h2>

<form asp-action="Create" method="post">
 
    <button type="submit" class="btn btn-primary">Tạo</button>
    <a asp-action="Index" class="btn btn-secondary">Hủy</a>
</form>
@if (TempData["error"] != null)
{
    <div class="alert alert-danger">
        @TempData["error"]
    </div>
}
@if (TempData["success"] != null)
{
    <div class="alert alert-success">
        @TempData["success"]
    </div>
}
@section Scripts {
    @await Html.PartialAsync("_ValidationScriptsPartial")
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const loaiGiamGia = document.getElementById("LoaiGiamGia");
            const couponFields = document.getElementById("coupon-fields");
            const voucherFields = document.getElementById("voucher-fields");

            function toggleFields() {
                if (loaiGiamGia.value === "0") {
                    couponFields.style.display = "block";
                    voucherFields.style.display = "none";
                } else if (loaiGiamGia.value === "1") {
                    couponFields.style.display = "none";
                    voucherFields.style.display = "block";
                }
            }

            // Gọi hàm khi tải trang
            toggleFields();

            // Sự kiện thay đổi
            loaiGiamGia.addEventListener("change", toggleFields);
        });
        document.addEventListener("DOMContentLoaded", function () {
            const typingPriceFields = document.querySelectorAll(".typing-price, input[type='number']");

            typingPriceFields.forEach(function (field) {
                field.addEventListener("input", function () {
                    this.value = this.value.replace(/[^0-9]/g, ''); // Chỉ chấp nhận số
                });
            });
        });

    </script>
}
